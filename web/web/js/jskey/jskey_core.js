/**
 * jskey库合集
 * @version 15
 * @datetime 2018-03-07 16:20
 * @author skey_chen
 * @copyright 2011-2018 &copy; 249725997@qq.com
 * @license LGPL
 */
var $jskey=$jskey||{};
;!function(){"use strict";
$jskey.on=function($e,et,fn){$e.attachEvent ? $e.attachEvent('on'+et,fn):$e.addEventListener(et,fn,false);return $jskey;};$jskey.$=function(id){return document.getElementById(id);};$jskey.$isDOM=(typeof HTMLElement==='object')?function(o){return o instanceof HTMLElement;}:function(o){return o&&typeof o==='object'&&o.nodeType===1&&typeof o.nodeName==='string';};$jskey.$byName=function(name){return document.getElementsByName(name);};$jskey.$byTagName=function(name){return document.getElementsByTagName(name);};$jskey.$dateFormat=function(d,f){var t={"y+":d.getFullYear(),"M+":d.getMonth()+1,"d+":d.getDate(),"H+":d.getHours(),"m+":d.getMinutes(),"s+":d.getSeconds(),"S+":d.getMilliseconds()};var _t;for(var k in t){while(new RegExp("("+k+")").test(f)){_t=(RegExp.$1.length==1)? t[k]:("0000000000".substring(0,RegExp.$1.length)+t[k]).substr((""+t[k]).length);f=f.replace(RegExp.$1,_t+"");}}return f;};$jskey.$replace=function(str,t,u){str=str+"";var i=str.indexOf(t);var r="";while(i !=-1){r+=str.substring(0,i)+u;str=str.substring(i+t.length,str.length);i=str.indexOf(t);}r=r+str;return r;};$jskey.$show=function(msg){if((msg||"").length>0){alert(msg);}};$jskey.$url=function(){var _p=window.location.pathname;return _p.substring(0,_p.lastIndexOf("/"));};$jskey.$random=function(){return(new Date().getTime())+"";};$jskey.$link=function(path){var k=document.createElement("link");k.rel="stylesheet";k.type="text/css";k.href=path;document.getElementsByTagName("head")[0].appendChild(k);k=null;};
$jskey.$src=$jskey.$replace($jskey.$byTagName("script")[$jskey.$byTagName("script").length-1].src+"","\\","/");$jskey.$path=$jskey.$src.substring(0,$jskey.$src.lastIndexOf("/")+1);try{if($jskey.$path.length>7&&$jskey.$path.substring($jskey.$path.length-7)!="/jskey/"){$jskey.$path="/web/js/jskey/";}}catch(e){}
$jskey.checkbox={getSelected:function(name,msg){var _a=[];var _e=$jskey.$byName(name);for(var i=0;i<_e.length;i++){if(_e[i].checked){_a[_a.length]={"id":_e[i].getAttribute("id"),"value":_e[i].value};}}if(_a.length==0){$jskey.$show(msg);}return _a;},countSelected:function(name){return(this.getSelected(name)).length;},getSelectedBySeparator:function(name,sep){var _v="";var _a=this.getSelected(name);for(var i=0;i<_a.length;i++){_v+=((_v=="")? "":sep)+_a[i].value;}return _v;},getSelectedIdBySeparator:function(name,sep){var _v="";var _a=this.getSelected(name);for(var i=0;i<_a.length;i++){_v+=((_v=="")? "":sep)+_a[i].id;}return _v;},getSingleSelected:function(name,msg){var _o=null;var _e=$jskey.$byName(name);for(var i=0;i<_e.length;i++){if(_e[i].checked){if(_o==null){_o={"id":_e[i].getAttribute("id"),"value":_e[i].value};}else{$jskey.$show(msg);_o=null;break;}}}return _o;},isSelected:function(name){var _e=$jskey.$byName(name);for(var i=0;i<_e.length;i++){if(_e[i].checked){return true;}}return false;},reselect:function(name,chk){var _e=$jskey.$byName(name);if(chk==null){for(var i=0;i<_e.length;i++){_e[i].checked=!(_e[i].checked);}}else{chk=(chk)? true:false;for(var i=0;i<_e.length;i++){_e[i].checked=chk;}}}};
$jskey.radio={getSelected:function(name,msg){var _o=null;var _e=$jskey.$byName(name);for(var i=0;i<_e.length;i++){if(_e[i].checked){_o={"id":_e[i].getAttribute("id"),"value":_e[i].value};break;}}if(_o==null){$jskey.$show(msg);}return _o;},getId:function(name,defaultValue){var _a=this.getSelected(name);return(_a==null)?defaultValue:_a.id;},getValue:function(name,defaultValue){var _a=this.getSelected(name);return(_a==null)?defaultValue:_a.value;},reselect:function(name,value,isDisabled){var _c=false;var _e=$jskey.$byName(name);for(var i=0;i<_e.length;i++){if(_e[i].value==value){_e[i].disabled=false;_e[i].checked=true;_c=true;}else{_e[i].disabled=isDisabled||false;}}if(!_c){_e[0].disabled=false;_e[0].checked=true;}return _c;},reset:function(name,isDisabled){isDisabled=isDisabled ? true:false;var _e=$jskey.$byName(name);for(var i=0;i<_e.length;i++){_e[i].disabled=isDisabled;_e[i].checked=false;}}};
$jskey.select={$fnSwap:function(o1,o2){var _t=o1.value;o1.value=o2.value;o2.value=_t;_t=o1.text;o1.text=o2.text;o2.text=_t;_t=o1.selected;o1.selected=o2.selected;o2.selected=_t;},exist:function(id,v){var _o=$jskey.$(id);for(var i=0;i<_o.options.length;i++){if(v==_o.options[i].value){return true;}}return false;},add:function(id,t,v){var _o=$jskey.$(id);_o.options[_o.options.length]=new Option(t,v);},copy:function(fromID,toID,isSelected,isClear){var _o1=$jskey.$(fromID);var _o2=$jskey.$(toID);if(_o1.options.length>-1){if(isSelected){if(_o1.selectedIndex>-1){if(isClear){_o2.options.length=0;}for(var i=0;i<_o1.options.length;i++){if(_o1.options[i].selected&&!this.exist(toID,_o1.options[i].value)){_o2.options[_o2.options.length]=new Option(_o1.options[i].text,_o1.options[i].value);}}}}else{if(isClear){_o2.options.length=0;}for(var i=0;i<_o1.options.length;i++){_o2.options[_o2.options.length]=new Option(_o1.options[i].text,_o1.options[i].value);}}}},move:function(id,count,isWay){var _o=$jskey.$(id);var _a=_o.options;if(count==0){var _t=null;if(isWay){for(var i=0;i<_a.length;i++){if(_a[i].selected&&_t){_o.insertBefore(_a[i],_t);}else if(!_t&&!_a[i].selected){_t=_a[i];}}}else{for(var i=_a.length-1;i>-1;i--){if(_a[i].selected){if(_t){_t=_o.insertBefore(_a[i],_t);}else{_t=_o.appendChild(_a[i]);}}}}}else{if(isWay){for(var j=0;j<count;j++){for(var i=1;i<_a.length;i++){if(_a[i].selected&&!_a[i-1].selected){this.$fnSwap(_a[i],_a[i-1]);}}}}else{for(var j=0;j<count;j++){for(var i=_a.length-2;i>-1;i--){if(_a[i].selected&&!_a[i+1].selected){this.$fnSwap(_a[i],_a[i+1]);}}}}}},remove:function(id,isSelected){var _o=$jskey.$(id);if(isSelected){for(var i=_o.length-1;i>=0;i--){if(_o.options[i].selected){_o.remove(i);}}}else{_o.options.length=0;}},reselect:function(id,isSelected){var _o=$jskey.$(id);var _a=_o.options;if(isSelected==null){for(var i=0;i<_a.length;i++){_a[i].selected=!_a[i].selected;}}else{isSelected=(isSelected)? true:false;for(var i=0;i<_a.length;i++){_a[i].selected=isSelected;}}},swap:function(fromID,toID,isSelected){var _o1=$jskey.$(fromID);var _o2=$jskey.$(toID);if(_o1.options.length>-1){var _a=[];if(isSelected){if(_o1.selectedIndex>-1){for(var i=_o1.length-1;i>=0;i--){if(_o1.options[i].selected){_a[_a.length]=new Option(_o1.options[i].text,_o1.options[i].value);_o1.remove(i);}}for(var i=0;i<_a.length;i++){_o2.options[_o2.options.length]=_a[i];}}}else{for(var i=_o1.length-1;i>=0;i--){_a[_a.length]=new Option(_o1.options[i].text,_o1.options[i].value);_o1.remove(i);}for(var i=0;i<_a.length;i++){_o2.options[_o2.options.length]=_a[i];}}}}};
$jskey.dialog={returnValue:null,dialogArguments:null,close:function(){},callback:function(){},showDialog:function(){var o=arguments[0];if(typeof(o)!="object"){o={};}var defaults={"id":"dsworkDialog","title":"Window","url":"","width":400,"height":300,"args":{"data":{},"url":""},"iconCls":'icon_system',"maximizable":false,"minimizable":false,"collapsible":false,"resizable":true,"modal":true,"zIndex":9999};var opts=$.extend(defaults,o);if(opts.args&&opts.args.url){if(opts.args.url.indexOf("/")!=0&&opts.args.url.indexOf("http:")!=0&&opts.args.url.indexOf("https:")!=0&&o.url.indexOf("file:")!=0&&o.url.indexOf(":")!=1){opts.args.url=$jskey.$url()+"/"+opts.args.url;}}$jskey.dialog.dialogArguments={url:opts.url,args:opts.args};var $win=$('#'+opts.id);$jskey.dialog.returnValue=null;var url=opts.url+((opts.url.indexOf("?")==-1)? "?jskey=":"&jskey=")+$jskey.$random();if($win.length){$('iframe',$win)[0].contentWindow.location.href=url;$win.dialog('open');}else{$win=$('<div id="'+opts.id+'" style="overflow:hidden;"></div>').appendTo('body');opts.onClose=function(){$jskey.dialog.dialogArguments=null;$win.dialog('destroy');try{if(o.callback&&typeof(o.callback)=="function"){o.callback();}else{$jskey.dialog.callback();}}catch(e){}};opts.content='<iframe scrolling="auto" src="" width="100%" height="100%" style="width:100%;height:100%;border:0;" frameborder="0"></iframe>';$win.dialog(opts);$('iframe',$win)[0].contentWindow.location.href=url;}$jskey.dialog.close=function(){$win.dialog('close');};},showModalDialog:function(url,args,width,height,status,scroll,resizable){url+=((url.indexOf("?")==-1)? "?jskey=":"&jskey=")+$jskey.$random();return window.showModalDialog(url,args,("help:no;center:yes;dialogWidth:"+width+"px;dialogHeight:"+height+"px;status:"+status+";scroll:"+scroll+";resizable:"+resizable+";dialogTop:"+((window.screen.availHeight-height)/ 3)+";dialogLeft:"+((window.screen.availWidth-width)/ 2)));},show:function(){var o=arguments[0];if(typeof(o)!="object"){o={};}o.url=o.url||arguments[2]||"";if(o.url.indexOf("/")!=0&&o.url.indexOf("http:")!=0&&o.url.indexOf("https:")!=0&&o.url.indexOf("file:")!=0&&o.url.indexOf(":")!=1){o.url=$jskey.$url()+"/"+o.url;}o.height=o.height||arguments[5]||450;$jskey.dialog.returnValue=null;var reValue=this.showModalDialog($jskey.$path+"themes/dialog/jskey_dialog.html",{title:o.title||arguments[1]||"",url:o.url,args:o.args||arguments[3]||"",height:o.height},o.width||arguments[4]||600,o.height,o.status||arguments[7]||"no",o.scroll||arguments[8]||"auto",o.resizable||arguments[9]||"yes");if(o.reload||arguments[6]||false){window.location.reload();}else{var v=reValue;$jskey.dialog.returnValue=v;$jskey.dialog.callback();return v;}},openWindow:function(url,target,width,height,top,left,status,scroll,resizable,menubar,fullscreen,toolbar,location,directories,channelmode){url+=((url.indexOf("?")==-1)? "?jskey=":"&jskey=")+$jskey.$random();window.open(url,target,("width="+width+",height="+height+",top:"+top+",left:"+left+",status="+status+",scrollbars="+scroll+",resizable="+resizable+",menubar="+menubar+",fullscreen="+fullscreen+",toolbar="+toolbar+",location="+location+",directories="+directories+",channelmode="+channelmode));},open:function(){var o=arguments[0];if(typeof(o)!="object"){o={};}o.width=o.width||arguments[3]||600;o.height=o.height||arguments[4]||450;o.top=o.top||arguments[5]||((window.screen.availHeight-o.height)/ 3);o.left=o.left||arguments[6]||((window.screen.availWidth-o.width)/ 2);this.openWindow(o.url||arguments[1]||"",o.target||arguments[2]||"",o.width,o.height,o.top,o.left,o.status||arguments[7]||"no",o.scroll||arguments[8]||"yes",o.resizable||arguments[9]||"yes",o.menubar||arguments[10]||"no",o.fullscreen||arguments[11]||"no",o.toolbar||arguments[12]||"no",o.location||arguments[13]||"no",o.directories||arguments[14]||"no",o.channelmode||arguments[15]||"no");}};
$jskey.dialog.showChoose=function(m){m.url=$jskey.$path+"themes/dialog/jskey_choose.html";return $jskey.dialog.showDialog(m);};
$jskey.dialog.showChooseKey=function(m){m.url=$jskey.$path+"themes/dialog/jskey_choose_key.html";return $jskey.dialog.showDialog(m);};
$jskey.Map=function(){this.$v=[];};$jskey.Map.prototype={$fnChk:function(v){return(typeof(v)!="string")? v+"":v.replace(/(^\s*)|(\s*$)/g,"");},put:function(k,v){k=this.$fnChk(k);if(k.length>0){for(var i=0;i<this.$v.length;i++){if(k==this.$v[i][0]){this.$v[i][1]=v;return false;}}this.$v[this.$v.length]=[k,v];return true;}},putTry:function(k,v){k=this.$fnChk(k);if(k.length>0){for(var i=0;i<this.$v.length;i++){if(k==this.$v[i][0]){return false;}}this.$v[this.$v.length]=[k,v];return true;}return false;},remove:function(k){k=this.$fnChk(k);if(k.length>0){for(var i=0;i<this.$v.length;i++){if(k==this.$v[i][0]){this.$v.splice(i,1);break;}}}},get:function(k){k=this.$fnChk(k);if(k.length>0){for(var i=0;i<this.$v.length;i++){if(k==this.$v[i][0]){return this.$v[i][1];}}}return null;},getKeyArray:function(){var _a=[];for(var i=0;i<this.$v.length;i++){_a[_a.length]=this.$v[i][0];}return _a;},getValueArray:function(){var _a=[];for(var i=0;i<this.$v.length;i++){_a[_a.length]=this.$v[i][1];}return _a;},size:function(){return this.$v.length;},containsKey:function(k){k=this.$fnChk(k);if(k.length>0){for(var i=0;i<this.$v.length;i++){if(k==this.$v[i][0]){return true;}}}return false;}};

if(typeof(jQuery)=="function"){$jskey.$link($jskey.$path+"themes/tooltip/jskey_tooltip.css");(function($){function fix($e){if(typeof($e.attr('msg'))!='string'){$e.attr('msg',$e.attr('title')||'').removeAttr('title');}}$jskey.tooltip=function(element,options){this.$element=$(element);this.options=options;fix(this.$element);};$jskey.tooltip.prototype={show:function(){var t=this.getTitle();if(t){var $tip=this.tip();$tip.find('.jskey-tooltip-inner')[this.options.html ? 'html':'text'](t);$tip[0].className='jskey-tooltip';$tip.remove().css({top:0,left:0,visibility:'hidden',display:'block'}).appendTo(this.$element.parent());var p=$.extend({},this.$element.position(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight});var ww=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;var g=this.options.show;var tp;switch(g.charAt(0)){case 'n':tp={top:p.top+p.height+this.options.offset,left:p.left+p.width / 2-ww / 2};break;case 's':tp={top:p.top-actualHeight-this.options.offset,left:p.left+p.width / 2-ww / 2};break;case 'e':tp={top:p.top+p.height / 2-actualHeight / 2,left:p.left-ww-this.options.offset};break;case 'w':tp={top:p.top+p.height / 2-actualHeight / 2,left:p.left+p.width+this.options.offset};break;}if(g.length==2){if(g.charAt(1)=='w'){tp.left=p.left+p.width / 2-15;}else{tp.left=p.left+p.width / 2-ww+15;}}$tip.css(tp).addClass('jskey-tooltip-'+g);$tip.css({visibility:'visible',opacity:this.options.opacity});}},hide:function(){this.tip().remove();},getTitle:function(){var t,$e=this.$element,o=this.options;var t,o=this.options;if(typeof o.title=='string'){t=$e.attr(o.title=='title' ? 'msg':o.title);}else if(typeof o.title=='function'){t=o.title.call($e[0]);}t=(''+t).replace(/(^\s*|\s*$)/,"");return t||o.text;},tip:function(){if(!this.$tip){this.$tip=$('<div class="jskey-tooltip"></div>').html('<div class="jskey-tooltip-arrow"></div><div class="jskey-tooltip-inner"/></div>');}return this.$tip;},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null;}}};$.fn.tipx=function(options){if(options===true){return this.data('tipx');}else if(typeof options=='string'){return this.data('tipx')[options]();}options=$.extend({},$.fn.tipx.defaults,options);if(options.show==""){options.show=$.fn.tipx.autoWE(this);}function get(ele){var tipx=$.data(ele,'tipx');if(!tipx){tipx=new $jskey.tooltip(ele,$.fn.tipx.init(ele,options));$.data(ele,'tipx',tipx);}return tipx;}function enter(){var tipx=get(this);tipx.show();}function leave(){var tipx=get(this);tipx.hide();}if(!options.live)this.each(function(){get(this);});this['bind']('mouseenter',enter)['bind']('mouseleave',leave);return this;};$.fn.tipx.defaults={text:'',show:'',html:false,offset:0,opacity:1,title:'title'};$.fn.tipx.init=function(ele,options){return $.metadata ? $.extend({},options,$(ele).metadata()):options;};$.fn.tipx.autoWE=function(ele){return $(ele).position().left>($(document).scrollLeft()+$(window).width()*3/4)? 'e':'w';};})(jQuery);}

$jskey.validator={"Char":{"v":/^[A-Za-z0-9_]+$/,"msg":"允许字母、数字、下划线"},"Chinese":{"v":/^[\u4e00-\u9fa5]+$/,"msg":"只允许中文"},"Email":{"v":/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,"msg":"格式错误"},"English":{"v":/^[A-Za-z]+$/,"msg":"只允许字母"},"Enterprise":{"v":/^[\u4e00-\u9fa5\uff08\uff09]+$/,"msg":"只允许中文"},"Mobile":{"v":/^(1\d{10})$/,"msg":"请输入手机号码(纯数字)"},"Money":{"v":/^(([1-9](\d+)?)|0)(\.\d+)?$/,"msg":"请输入金额"},"Name":{"v":/^[\u0020\u0024-\u0025\u0028-\u002e\u0030-\u005b\u005d-\u007b\u007d-\uffef]+$/,"msg":"不允许特殊字符"},"Numeral":{"v":/^\d+$/,"msg":"请输入数字"},"Phone":{"v":/^((0\d{2,3})|(\(0\d{2,3}\)))?(-)?[1-9]\d{6,10}(([\-0-9]+)?[^\D]{1})?$/,"msg":"请输入电话号码"},"Require":{"v":/\S+/,"msg":"必填"},"RequireCompact":{"v":/^\S+$/,"msg":"必填(无空格)"},"RequireTrim":{"v":/(^[^\s]{1}(.+)?[^\s]{1}$)|(^[^\s]{1}$)/,"msg":"必填(无前后空格)"},"Url":{"v":/^http(s)?:\/\/[\w\-]+(\.[\w\-]+)*(:(6553[0-5]|655[0-2]\d|65[0-4]\d{2}|6[0-4]\d{3}|[1-5]\d{4}|[1-9]\d{1,3}|[1-9]))?(\/[\d\w\-\/\=\!\@\#\$\%\~\&\(\)\[\]\{\};\?\*\+\.]*)?$/,"msg":"格式错误"},"Zip":{"v":/^[1-9]\d{5}$/,"msg":"邮政编码不存在"},"Number":{"v":"this._Number(x.value)","msg":"请输入数值"},"NumberPlus":{"v":"this._NumberPlus(x.value)","msg":"请输入正数"},"NumberMinus":{"v":"this._NumberMinus(x.value)","msg":"请输入负数"},"Integer":{"v":"this._Integer(x.value)","msg":"请输入整数"},"IntegerPlus":{"v":"this._IntegerPlus(x.value)","msg":"请输入正整数"},"IntegerMinus":{"v":"this._IntegerMinus(x.value)","msg":"请输入负整数"},"Custom":{"v":"this._Custom(x.value,x.getAttribute('regexp'))","msg":""},"DateCheck":{"v":"this._DateCheck(x.value,x.getAttribute('operator'),$jskey.$(x.getAttribute('to')).value,x.getAttribute('require'))","msg":"日期不正确"},"Filename":{"v":"this._Filename(x.value)","msg":"不能为空,且不能包含下列字符 \\ \/ \:\* \? \"<>"},"Filter":{"v":"this._Filter(x.value,x.getAttribute('accept'))","msg":""},"Function":{"v":"this._Function(x.value,x.getAttribute('fn'))","msg":""},"Group":{"v":"this._Group(x.getAttribute('name'),x.getAttribute('min'),x.getAttribute('max'))","msg":""},"IdCard":{"v":"this._IdCard(x.value)","msg":"身份证号码错误"},"Limit":{"v":"this._Limit(x.value.length,x.getAttribute('min'),x.getAttribute('max'))","msg":""},"LimitB":{"v":"this._Limit(this._LenB(x.value),x.getAttribute('min'),x.getAttribute('max'))","msg":""},"OrgCode":{"v":"this._OrgCode(x.value)","msg":"组织机构代码错误"},"Password":{"v":"this._Password(x.value)","msg":"密码不符合安全规则"},"Repeat":{"v":"x.value==$jskey.$(x.getAttribute('to')).value","msg":"输入不一致"},"Range":{"v":"this._Range(x.value,x.getAttribute('min'),x.getAttribute('max'))","msg":"请输入正确整数"},"UnitCode":{"v":"this._UnitCode(x.value)","msg":"统一社会信用代码错误"},"UploadFile":{"v":"this._UploadFile(x.value)","msg":"请上传文件"},"UploadFileCheck":{"v":"this._UploadFileCheck(x.value)","msg":"请上传文件或取消(清空上传内容)"},"UserCard":{"v":"this._UserCard(x.value)","msg":"身份证号码错误"},$ErrorObj:[],$ErrorMsg:["\u4ee5\u4e0b\u539f\u56e0\u5bfc\u81f4\u63d0\u4ea4\u5931\u8d25\uff1a\t\t\t\t"],$AlertMsg:["\u4ee5\u4e0b\u539f\u56e0\u5bfc\u81f4\u63d0\u4ea4\u5931\u8d25\uff1a\t\t\t\t"],$num:1,$Array:function(formID,inputID,inputObject){var m=null;if(formID.length==0){m={arr:[]};var _o=(inputID.length>0 ? $jskey.$(inputID):inputObject);this.$Clear(_o);var _dt=_o.getAttribute("datatype")||_o.getAttribute("dataType");if(typeof(_dt)=="object"||typeof(this[_dt])=="undefined"){return m;}m.arr.push(_o);}else{m=$jskey.$(formID)||event.srcElement;if(m.arr !=null){for(var i=0;i<m.arr.length;i++){this.$Clear(m.arr[i]);}}m.arr=[];var _t=m.getElementsByTagName('*');var _dt;for(var i=0;i<_t.length;i++){this.$Clear(_t[i]);if(_t[i].getAttribute){_dt=_t[i].getAttribute("datatype")||_t[i].getAttribute("dataType");if(typeof(_dt)=="object"||typeof(this[_dt])=="undefined"){continue;}m.arr.push(_t[i]);}}}return m;},$OnBlur:function(obj,mode,show){this.Validate(null,mode,null,obj,show);},$OnFocus:function(obj){this.$Clear(obj);},Init:function(){var formID=arguments[0]||"";var mode=arguments[1]||"";var inputID=arguments[2]||"";var inputObject=arguments[3]||"";var show=arguments[4];if(show==null){show=true;}show=show ? true:false;var obj=this.$Array(formID,inputID,inputObject);var count=obj.arr.length;var e=this;for(var i=0;i<count;i++){var v=obj.arr[i];var _dt=v.getAttribute("datatype")||v.getAttribute("dataType");if(typeof(_dt)=="object"||typeof(this[_dt])=="undefined"||v.JskeyValidatorTrans){continue;}v.JskeyValidatorTrans=true;v.JskeyValidatorBlur=v.onblur;v.JskeyValidatorFocus=v.onfocus;v.JskeyValidatorShow=show;v.JskeyValidatorMode=3;v.onblur=function(){e.$OnBlur(this,this.JskeyValidatorMode,this.JskeyValidatorShow);if(typeof(this.JskeyValidatorBlur)=='function'){this.JskeyValidatorBlur();}};v.onfocus=function(){e.$OnFocus(this);if(typeof(this.JskeyValidatorFocus)=='function'){this.JskeyValidatorFocus();}};if(_dt=="Group"){var _g=document.getElementsByName(v.getAttribute("name"));for(var j=_g.length-1;j>=0;j--){_g[j].JskeyValidatorObj=v;if(!_g[j].JskeyValidatorTrans){_g[j].JskeyValidatorTrans=true;_g[j].JskeyValidatorBlur=_g[j].onblur;_g[j].JskeyValidatorFocus=_g[j].onfocus;_g[j].JskeyValidatorShow=show;_g[j].JskeyValidatorMode=mode;_g[j].onblur=function(){e.$OnBlur(this.JskeyValidatorObj,this.JskeyValidatorMode,this.JskeyValidatorShow);if(typeof(this.JskeyValidatorBlur)=='function'){this.JskeyValidatorBlur();}};_g[j].onfocus=function(){e.$OnFocus(this.JskeyValidatorObj);if(typeof(this.JskeyValidatorFocus)=='function'){this.JskeyValidatorFocus();}};}}}}},Validate:function(){var formID=arguments[0]||"";var mode=arguments[1]||"";var inputID=arguments[2]||"";var inputObject=arguments[3]||"";var show=arguments[4];if(show==null){show=true;}show=show ? true:false;this.Init(formID,mode,inputID,inputObject,show);var obj=this.$Array(formID,inputID,inputObject);var count=obj.arr.length;var errMsg="";var alertMsg="";this.$ErrorMsg.length=1;this.$AlertMsg.length=1;this.$ErrorObj.length=1;this.$ErrorObj[0]=obj;for(var i=0;i<count;i++){var x=obj.arr[i];var _dt=x.getAttribute("datatype")||x.getAttribute("dataType");if(typeof(_dt)=="object"||typeof(this[_dt])=="undefined"){continue;}if(x.getAttribute("require")=="false"&&x.value==""){continue;}if(x.getAttribute("msg")==null){errMsg=this[_dt].msg;}else{errMsg=x.getAttribute("msg");}if(x.getAttribute("alertMsg")==null||typeof(x.getAttribute("alertMsg"))=="undefined"){alertMsg=errMsg;}else{alertMsg=x.getAttribute("alertMsg");}switch(_dt){case "Number":case "NumberPlus":case "NumberMinus":case "Integer":case "IntegerPlus":case "IntegerMinus":case "Custom":case "DateCheck":case "Filename":case "Filter":case "Function":case "Group":case "IdCard":case "Limit":case "LimitB":case "OrgCode":case "Password":case "Repeat":case "Range":case "UnitCode":case "UploadFile":case "UploadFileCheck":case "UserCard":if(!eval(this[_dt].v)){this.$AddError(i,errMsg,alertMsg);}break;default:if(!this[_dt].v.test(x.value)){this.$AddError(i,errMsg,alertMsg);}break;}}if(this.$ErrorMsg.length>1){mode=mode||3;if(mode<3){mode=3;}var _c=this.$ErrorObj.length;switch(mode){case 4:alert(this.$AlertMsg.join("\n"));case 3:var _temp=(typeof(jQuery)=="function"&&$jskey.tooltip);for(var i=1;i<_c;i++){try{var _o=document.createElement("SPAN");this.$num++;_o.id="__ErrorMsgPanel"+this.$num;_o.style.color="#ff0000";this.$Clear(this.$ErrorObj[i]);this.$ErrorObj[i].JskeyValidator=_o.id;this.$ErrorObj[i].parentNode.appendChild(_o);_o.innerHTML=this.$ErrorMsg[i].replace(/\d+:/,"");if(_temp){var v=jQuery("#"+_o.id);var m=$("<img style=\"vertical-align:middle;\" src=\""+$jskey.$path+"themes/tooltip/tipx.gif"+"\"/>").attr("msg",v.html());v.html(m);m.tipx();if(show){m.tipx("show");}}}catch(e){alert(e.description);}}break;default:alert(this.$AlertMsg.join("\n"));break;}return false;}return true;},$Clear:function(o){try{o.parentNode.removeChild($jskey.$(o.JskeyValidator));o.JskeyValidator=null;}catch(e){}},$AddError:function(index,emsg,amsg){this.$ErrorObj[this.$ErrorObj.length]=this.$ErrorObj[0].arr[index];this.$ErrorMsg[this.$ErrorMsg.length]=this.$ErrorMsg.length+":"+emsg;this.$AlertMsg[this.$AlertMsg.length]=this.$AlertMsg.length+":"+amsg;},_Number:function(v){if(!isNaN(v)){if(v.length==0||v.indexOf("+")!=-1){return false;}if(v.indexOf(".")==0||v.indexOf("-.")==0||v.indexOf("00")==0||v.indexOf("-00")==0||v.lastIndexOf(".")==v.length-1){return false;}return true;}return false;},_NumberPlus:function(v){if(this._Number(v)){if(v.indexOf("-")!=-1){return false;}return true;}return false;},_NumberMinus:function(v){if(this._Number(v)){if(v.indexOf("-")!=-1){return true;}}return false;},_Integer:function(v){if(this._Number(v)){if(v.indexOf(".")!=-1){return false;}return true;}return false;},_IntegerPlus:function(v){if(this._Integer(v)){if(v.indexOf("-")!=-1){return false;}return true;}return false;},_IntegerMinus:function(v){if(this._Integer(v)){if(v.indexOf("-")!=-1){return true;}}return false;},_Custom:function(op,reg){return new RegExp(reg,"g").test(op);},_DateCheck:function(op1,operator,op2,require){if(require=="false"&&op2.length==0){return true;}try{if(op1.length==0||op2.length==0){return false;}var d1=_$ToDate(op1);var d2=_$ToDate(op2);if(typeof(d1)!="object"||typeof(d2)!="object"){return false;}switch(operator){case "==":return(d1==d2);case "!=":return(d1 !=d2);case ">":return(d1>d2);case ">=":return(d1>=d2);case "<":return(d1<d2);case "<=":return(d1<=d2);default:return(d1>=d2);}}catch(e){}return false;function _$ToDate(op){try{var o,_y,_M,_d;o=op.match(new RegExp("^(\\d{4})([-./])(\\d{1,2})\\2(\\d{1,2})"));_d=o[4];_M=o[3]* 1;_y=o[1];if(!parseInt(_M)){return "";}_M=_M==0 ? 12:_M;return new Date(_y,_M-1,_d);}catch(ee){}return "";}},_Filename:function(v){if(v.length==0){return false;}if(v.indexOf("\\")==-1&&v.indexOf("\/")==-1&&v.indexOf("\:")==-1&&v.indexOf("\*")==-1&&v.indexOf("\?")==-1&&v.indexOf("\"")==-1&&v.indexOf("<")==-1&&v.indexOf(">")==-1&&v.indexOf(".")!=0&&v.lastIndexOf(".")!=(v.length-1)){return true;}return false;},_Filter:function(input,filter){return new RegExp("^.+\.(?=EXT)(EXT)$".replace(/EXT/g,filter.split(/\s*,\s*/).join("|")),"gi").test(input);},_Function:function(value,fn){var result=false;value=$jskey.$replace(value,"\"","\\\"");value=$jskey.$replace(value,"\r","");value=$jskey.$replace(value,"\n","");eval("result="+fn+"(\""+$jskey.$replace(value,"\"","\\\"")+"\")");return result;},_Group:function(name,min,max){var _g=document.getElementsByName(name);var chk=0;min=min||1;max=max||_g.length;for(var i=_g.length-1;i>=0;i--){if(_g[i].checked){chk++;}}return min<=chk&&chk<=max;},_ID_CN:function(v){var _iSum=0;if(!(/^\d{17}([X\d]{1})$/i.test(v))){return false;}v=v.replace(/[X]{1}$/i,"a");if("11_12_13_14_15_21_22_23_31_32_33_34_35_36_37_41_42_43_44_45_46_50_51_52_53_54_61_62_63_64_65_71_81_82_91".indexOf(v.substr(0,2))==-1){return false;}var _bd=v.substr(6,4)+"/"+v.substr(10,2)+"/"+v.substr(12,2);if(_bd !=$jskey.$dateFormat(new Date(_bd),"yyyy/MM/dd")){return false;}for(var i=17;i>=0;i--){_iSum+=(Math.pow(2,i)% 11)* parseInt(v.charAt(17-i),11);}if(_iSum%11 !=1){return false;}return true;},_ID_HK:function(v){if(!(/^([A-Z]{1})\d{6}\(([0-9A]{1})\)$/.test(v))){return false;}var i1=v.charCodeAt(0)-64;var i2=v.charCodeAt(1)-48;var i3=v.charCodeAt(2)-48;var i4=v.charCodeAt(3)-48;var i5=v.charCodeAt(4)-48;var i6=v.charCodeAt(5)-48;var i7=v.charCodeAt(6)-48;var i8=v.charCodeAt(8);i8=i8-(i8==65 ? 55:48);var _iSum=i1*8+i2*7+i3*6+i4*5+i5*4+i6*3+i7*2+i8;if(_iSum%11 !=0){return false;}return true;},_ID_TW:function(v){if(!(/^([A-Z]{1})([12]{1})\d{8}$/.test(v))){return false;}var d1=parseInt(("ABCDEFGHJKLMNPQRSTUVXYWZIO".indexOf(v.charAt(0))+10),10);var x1=parseInt(d1/10,10);var x2=d1%10;var d2=parseInt(v.charAt(1),10);var d3=parseInt(v.charAt(2),10);var d4=parseInt(v.charAt(3),10);var d5=parseInt(v.charAt(4),10);var d6=parseInt(v.charAt(5),10);var d7=parseInt(v.charAt(6),10);var d8=parseInt(v.charAt(7),10);var d9=parseInt(v.charAt(8),10);var d10=parseInt(v.charAt(9),10);var _iSum=x1+x2*9+d2*8+d3*7+d4*6+d5*5+d6*4+d7*3+d8*2+d9;if(d10==10-_iSum%10){return true;}return false;},_ID_MO:function(v){if(!(/^([157]{1})\d{6}\(\d{1}\)$/.test(v))){return false;}return true;},_IdCard:function(v){return this._ID_CN(v);},_Limit:function(len,min,max){min=min||0;max=max||Number.MAX_VALUE;return min<=len&&len<=max;},_LenB:function(v){return v.replace(/[^\x00-\xff]/g,"***").length;},_OrgCode:function(v){if(!(/^([A-Z\d]{9})$/.test(v))){return false;}var CC="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";var WW=[3,7,9,10,5,8,4,2];var iSum=0;for(var i=0;i<8;i++){iSum+=CC.indexOf(v.charAt(i))* WW[i];}var C9=11-iSum%11;if(C9==11){C9=0;}if(C9==10){C9='X';}if(C9==v.charAt(8)){return true;}return false;},_Password:function(v){return !(/^(([A-Z]*|[a-z]*|\d*|[-_\~!@#\$%\^&\*\.\(\)\[\]\{\}<>\?\\\/\'\"]*)|.{0,5})$|\s/.test(v));},_Range:function(v,min,max){min=min||(-1 * Number.MAX_VALUE);max=max||Number.MAX_VALUE;return this._Integer(v)&&parseInt(min)<=parseInt(v)&&parseInt(v)<=parseInt(max);},_UnitCode:function(v){if(!(/^([ABCDEFGHJKLMNPQRTUWXY\d]{18})$/.test(v))){return false;}if(!this._OrgCode(v.substr(8,9))){return false;}if("11_12_13_19_21_31_41_51_52_53_59_61_71_81_91_92_93_99_A1_B1_C1_D1_E1_F1_G1_Y1".indexOf(v.substr(0,2))==-1){return false;}var CC="0123456789ABCDEFGHJKLMNPQRTUWXY0";var WW=[1,3,9,27,19,26,16,17,20,29,25,13,8,24,10,30,28];var iSum=0;for(var i=0;i<17;i++){iSum+=CC.indexOf(v.charAt(i))* WW[i];}if(CC.charAt(31-iSum%31)==v.charAt(17)){return true;}return false;},_UploadFile:function(v){if(v !=""){if(v=="0"){return false;}return true;}return false;},_UploadFileCheck:function(v){return v=="";},_UserCard:function(v){if(this._ID_CN(v)){return true;}else if(this._ID_HK(v)){return true;}else if(this._ID_TW(v)){return true;}else if(this._ID_MO(v)){return true;}return false;},submit:function(containerid,submitid,type){if(this.Validate(containerid,3)){if(type==null||type !="select"){var _msg="是否确定提交?";if(type=="insert")_msg="是否确定提交?";else if(type=="update")_msg="是否确定保存?";if(!confirm(_msg)){return false;}}$jskey.$(submitid).click();return true;}return false;}};
if(true){(new Image()).src=$jskey.$path+"themes/tooltip/tipx.gif";}

document.write("<style type='text/css'>"+".jskey_page{font-size:0;clear:both;}"+".jskey_page *{display:inline-block;vertical-align:top;font-size:12px;color:#333333;width:auto;}"+".jskey_page a,.jskey_page span{height:26px;line-height:26px;border-radius:2px;}"+".jskey_page a{margin:0 3px 6px 3px;padding:0 10px;cursor:pointer;text-decoration:none;}"+".jskey_page .page{height:28px;line-height:28px;margin:0 3px 6px 3px;padding:0 10px;width:auto;}"+".jskey_page input,.jskey_page button,.jskey_page select{border:1px solid #ccc;background-color:#ffffff;}"+".jskey_page input{height:24px;line-height:24px;margin:0 5px;padding:0 5px;width:28px;}"+".jskey_page button{height:26px;line-height:26px;margin:0 0px;padding:0 5px;cursor:pointer;}"+".jskey_page select{height:26px;line-height:26px;margin:0 5px;padding:0;width:50px;}"+".jskey_page_skin_default a{border:1px solid #ccc;background-color:#ffffff;color:#333333;}"+".jskey_page_skin_default span{color:#333333;}"+".jskey_page_skin_default .page{font-weight:700;color:#000000;background-color:#ffffff;}"+"</style>");
var count=0;
$jskey.Page=function(p){this.config=p||{};this.config.i=count++;this.arr=p.arr||[];this.pageArray=[];var _E=this;var _C=this.config;if(_C.jump){_C.fn=_C.jump;_C.jump=null;}if(!_C.redo){_C.redo=function(){_E.redo();};}if(_C.noexecute){this.redo();}else{this.render();}for(var j=0;j<this.arr.length;j++){var m=this.arr[j];m.E=_E;m.page=_C.page;m.pagesize=_C.pagesize;m.size=_C.size;m.fn=function(e){e.E.config.page=e.page;e.E.config.pagesize=e.pagesize;e.E.config.size=e.size;e.E.go(e.page);e.E.other();};m.noexecute=true;this.pageArray[j]=new $jskey.Page(m);}};$jskey.Page.prototype.pageview_=function(C,v,txt,btn){var s="",my=/^#/.test(C.skin),x=['#ffffff'];if(my){x=C.skin.split(",");}if(x.length<2){x[1]='#000000';}if(C.page===v&&!btn){s='<span class="page" '+(my ? 'style="background-color:'+x[0]+';color:'+x[1]+';"':'')+'>'+txt+'</span>';}else{s='<a data-jskeypage="'+v+'">'+txt+'</a>';}return s;};$jskey.Page.prototype.sizeArray_=function(){return[5,10,15,20,25,30,50,100];};$jskey.Page.prototype.tempArray_=["","{prev}{pageview}{next}","{prev}{pagelist}{next}<span>&nbsp;\u5171{totalpage}\u9875&nbsp;\u5230\u7B2C</span>{skip}<span>\u9875</span>{go}","<span>\u5171{size}\u6761&nbsp;\u7B2C{page}/{totalpage}\u9875&nbsp;</span>{first}{prev}{next}{last}<span>&nbsp;\u8F6C\u5230\u7B2C</span>{skip}<span>\u9875</span>{go}<span>&nbsp;\u6BCF\u9875</span>{pagesize}<span>\u6761</span>","{prev}{next}"];$jskey.Page.prototype.view_=function(){var E=this,C=E.config,V={},H="",R=$jskey.$replace;C.hide=(C.hide||false)==true;C.page=(C.page|0)||1;C.pagesize=C.pagesize|0;C.skin=C.skin||'';if(C.pagesize<=0){C.pagesize=10;}C.size=(C.total||C.count||C.size||-1)|0;C.total=C.count=null;if(C.size==-1){C.totalpage=(C.pages||C.totalpage||0)|0;C.pages=null;}else{C.totalpage=Math.ceil(C.size/C.pagesize);}if(C.totalpage<=0){C.totalpage=1;}if(C.page>C.totalpage){C.page=C.totalpage};C.pagelist='pagelist' in C ?(C.pagelist|0):5;V.txt=['GO','\u9996\u9875','\u4e0a\u9875','\u4e0b\u9875','\u5C3E\u9875'];V.tmp=['go','first','prev','next','last'];for(var i=0;i<V.txt.length;i++){V.txt[i]=V.tmp[i]in C ? C[V.tmp[i]]:V.txt[i];}H='template' in C ? C.template:E.tempArray_[3];if(H>0&&H<E.tempArray_.length){H=E.tempArray_[H];}V.t=C.size;if(V.t==-1){V.t="";}H=R(H,"{size}",V.t);H=R(H,"{count}",V.t);H=R(H,"{total}",V.t);H=R(H,"{page}",C.page);H=R(H,"{totalpage}",C.totalpage);H=R(H,"{pagesize}",function(){var s="",a=E.sizeArray_();s+='<select>';for(var i=0;i<a.length;i++){s+='<option value="'+a[i]+'"'+(a[i]==C.pagesize ? ' selected="selected"':'')+'>'+a[i]+'</option>'}s+='</select>';return s;}());H=R(H,"{skip}",'<input type="number" min="1" onkeyup="this.value=this.value.replace(/\\D/,\'\');" class="skip">');H=R(H,"{go}",'<button type="button">'+V.txt[0]+'</button>');if(C.hide&&C.page==1){H=R(H,"{first}","");H=R(H,"{prev}","");}else{H=R(H,"{first}",E.pageview_(C,1,V.txt[1],true));V.t=C.page-1;if(V.t<1){V.t=1;}H=R(H,"{prev}",E.pageview_(C,V.t,(V.txt[2]=='page' ? V.t:V.txt[2]),true));}if(C.hide&&C.page==C.totalpage){H=R(H,"{last}","");H=R(H,"{next}","");}else{H=R(H,"{last}",E.pageview_(C,C.totalpage,V.txt[4],true));V.t=C.page+1;if(V.t>C.totalpage){V.t=C.totalpage;}H=R(H,"{next}",E.pageview_(C,V.t,(V.txt[3]=='page' ? V.t:V.txt[3]),true));}V.list={};V.t=C.pagelist;if(V.t>=0){V.ts=V.list.start=C.page-Math.floor((V.t-1)/2);V.te=V.list.end=C.page+Math.floor(V.t/2);if(V.list.start<1){V.list.start=1}if(V.list.end>C.totalpage){V.list.end=C.totalpage}V.t="";V.t+=E.pageview_(C,1,1,false);if(V.list.start>2){V.t+=E.pageview_(C,V.list.start,'\u2026',false);}for(var i=V.list.start;i<=V.list.end;i++){if(i<=1||i>=C.totalpage){continue;}V.t+=E.pageview_(C,i,i,false);}if(V.list.end<C.totalpage-1){V.t+=E.pageview_(C,V.list.end,'\u2026',false);}if(C.totalpage !=1){V.t+=E.pageview_(C,C.totalpage,C.totalpage,false);}H=R(H,"{pagelist}",V.t);V.t="";if(V.list.start>1){V.t+=E.pageview_(C,V.list.start,'\u2026',false);}for(var i=V.list.start;i<=V.list.end;i++){V.t+=E.pageview_(C,i,i,false);}if(V.list.end<C.totalpage){V.t+=E.pageview_(C,V.list.end,'\u2026',false);}H=R(H,"{pageview}",V.t);}else{H=R(H,"{pagelist}","");H=R(H,"{pageview}","");}return '<div class="jskey_page jskey_page_skin_'+(C.skin ?(/^#/.test(C.skin)? 'default':C.skin):'default')+'" id="jskey_page_'+C.i+'">'+H+'</div>';};$jskey.Page.prototype.jump=function(elem){var EE=this,C=EE.config,childs=elem.children;var sel=elem.getElementsByTagName('select')[0];var btn=elem.getElementsByTagName('button')[0];var input=elem.getElementsByTagName('input')[0];for(var i=0,len=childs.length;i<len;i++){if(childs[i].nodeName.toLowerCase()==='a'){$jskey.on(childs[i],'click',function(){var page=this.getAttribute('data-jskeypage')|0;C.page=page;EE.render();});}}if(btn){$jskey.on(btn,'click',function(){var page=input.value.replace(/\s|\D/g,'')|0;if(page&&page<=C.totalpage){C.page=page;EE.render();}});}if(sel){$jskey.on(sel,'change',function(){C.pagesize=sel.value;EE.render();});}};$jskey.Page.prototype._redo=function(){var E=this,C=E.config;var H=E.view_();C.o=C.object||C.cont;switch(typeof C.o==='object' ?(C.o.length===undefined ? 2:3):1){case 2:C.o.innerHTML=H;break;case 3:C.o.html(H);break;case 1:$jskey.$(C.o).innerHTML=H;break;}E.jump($jskey.$('jskey_page_'+C.i));};$jskey.Page.prototype.redo=function(){var E=this;E._redo();E.other();};$jskey.Page.prototype.render=function(){var E=this,C=E.config;E._redo();C.fn&&C.fn(C);E.other();};$jskey.Page.prototype.go=function(page){var E=this,C=E.config;C.page=page;E.render();};$jskey.Page.prototype.other=function(){var E=this,C=E.config;for(var j=0;j<E.pageArray.length;j++){var m=E.pageArray[j];m.config.page=C.page;m.config.pagesize=C.pagesize;m.config.size=C.size;m._redo();}};
$jskey.page=function(p){return new $jskey.Page(p);};

$jskey.$CalendarLang={};
$jskey.Calendar=function(){this.d=new Date();this.$p={"min":"0100-01-01 00:00:00","max":"9999-12-31 23:59:59","cy":this.d.getFullYear(),"cM":this.d.getMonth(),"cd":this.d.getDate()};this.$s={};this.v="jskey_cal";this.$k={"div":this.v+"_a","panel":this.v+"_b","date":this.v+"_c","show":this.v+"_d","x":this.v+"_e","title":this.v+"_f","data":this.v+"_g","prevY":this.v+"_py","nextY":this.v+"_ny","prevP":this.v+"_pp","nextP":this.v+"_np","prevM":this.v+"_pm","nextM":this.v+"_nm","y":this.v+"_y","M":this.v+"_nn","H":this.v+"_H","m":this.v+"_m","s":this.v+"_s","clear":this.v+"_i","ok":this.v+"_j","close":this.v+"_k"};this.$c={"format":"yyyy-MM-dd","lang":"zh-CN","left":0,"top":0,"level":4};this.$focus=false;this.$input=null;this.$div=null;this.$panel=null;this.$sel=null;};
$jskey.Calendar.prototype={$:function(i){return $jskey.$(i);},$skin:function(n){$jskey.$link($jskey.$path+"themes/calendar/"+n+"/skin.css");},$bindData:function(){var E=this;var S=E.$s,I=E.$c.min,A=E.$c.max;E.$(E.$k.show).style.display="none";E.$recovery();var dateArray=E.$getViewArray(E.$int(S.y),E.$int(S.M));var tds=E.$(E.$k.date).getElementsByTagName("td");for(var i=0;i<tds.length;i++){var z=tds[i];z.onclick=z.onmouseover=z.onmouseout=function(){};z.setAttribute("otd","");var v=dateArray[i];z.innerHTML=v;if(v<0){z.className="";z.innerHTML=-v;if(v<-20){var y=S.y,M=S.M;M--;if(M==-1){y--;M=11;}if(E.$checkDate(4,{y:y,M:M,d:-v})){z.setAttribute("otd","x");z.className=z.getAttribute("tn")=="tdDay" ? "hday":"hholiday";E.$onMouse(z);if(E.$c.level==4){z.onclick=function(){E.$s.d=this.innerHTML;E.goPrevMonth(E);E.$recovery();E.$(E.$k.ok).click();};}else{z.onclick=function(){E.$s.d=this.innerHTML;E.goPrevMonth(E);E.$recovery();E.$bindData();};}}}else{var y=S.y,M=S.M;M++;if(M>11){y++;M=0;}if(E.$checkDate(4,{y:y,M:M,d:-v})){z.setAttribute("otd","x");z.className=z.getAttribute("tn")=="tdDay" ? "hday":"hholiday";E.$onMouse(z);if(E.$c.level==4){z.onclick=function(){E.$s.d=this.innerHTML;E.goNextMonth(E);E.$recovery();E.$(E.$k.ok).click();};}else{z.onclick=function(){E.$s.d=this.innerHTML;E.goNextMonth(E);E.$recovery();E.$bindData();};}}}}else if(!(E.$checkDate(4,{y:S.y,M:S.M,d:v}))){z.className="";}else{z.className=(z.getAttribute("tn")=="tdDay")?"day":"holiday";z.isToday=false;if(E.$p.cy==S.y&&E.$p.cM==S.M&&E.$p.cd==v){z.className="today";z.isToday=true;}if(S.d==v){z.className="sel";E.$sel=z;}if(E.$c.level==4){z.onclick=function(){E.$s.d=this.innerHTML;E.$recovery();E.$(E.$k.ok).click();};}else{z.onclick=function(){if(E.$sel !=null){var t="day";if(E.$sel.isToday){t="today";}else{if(E.$sel.getAttribute("tn")!="tdDay"){t="holiday";}}E.$sel.className=t;}this.className="sel";E.$s.d=this.innerHTML;E.$recovery();E.$sel=this;};}E.$onMouse(z);}}},$blur:function(){if(!(this.$focus)){this.$hide();}},$checkDate:function(t,o){var I=this.$c.min,A=this.$c.max,x={M:0,d:1,H:0,m:0,s:0},i={M:0,d:1,H:0,m:0,s:0},a={M:0,d:1,H:0,m:0,s:0};switch(t){case 1:x.s=o.s;i.s=I.s,a.s=A.s;case 2:x.m=o.m;i.m=I.m,a.m=A.m;case 3:x.H=o.H;i.H=I.H,a.H=A.H;case 4:x.d=o.d;i.d=I.d,a.d=A.d;case 5:x.M=o.M;i.M=I.M,a.M=A.M;}var di=(new Date(I.y,i.M,i.d,i.H,i.m,i.s)).valueOf();var da=(new Date(A.y,a.M,a.d,a.H,a.m,a.s)).valueOf();var d=(new Date(o.y,x.M,x.d,x.H,x.m,x.s)).valueOf();return di<=d&&d<=da;},$draw:function(){var E=this;var K=this.$k,L=$jskey.$CalendarLang[E.$c.lang],a=[];a.push('<div style="z-index:10000;">');a.push('<div class="dymd div">');a.push('<div class="dy">');a.push('<div id="'+K.prevY+'" class="btn dp"><div class="jsarr"><div class="left"></div></div></div>');a.push('<div id="'+K.y+'" class="btn year"></div>');a.push('<div id="'+K.nextY+'" class="btn dn"><div class="jsarr"><div class="right"></div></div></div>');a.push('</div>');a.push('<div class="dm"'+(E.$c.level>5?' style="display:none;"':'')+'>');a.push('<div id="'+K.prevM+'" class="btn dp"><div class="jsarr"><div class="left"></div></div></div>');a.push('<div id="'+K.M+'" class="btn month"></div>');a.push('<div id="'+K.nextM+'" class="btn dn"><div class="jsarr"><div class="right"></div></div></div>');a.push('</div>');a.push('</div>');a.push('<div class="date div">');a.push('<table id="'+K.date+'" style="display:'+(E.$c.level>=5 ? 'none':'')+';">');a.push('<tr>');for(var i=0;i<7;i++){a.push('<th class="title">'+L.w[i]+'</th>');}a.push('</tr>');for(var i=0;i<6;i++){a.push('<tr>');for(var j=0;j<7;j++){if(j==0||j==6){a.push('<td tn="tdHoliday"></td>');}else{a.push('<td tn="tdDay"></td>');}}a.push('</tr>');}a.push('</table>');a.push('<div id="'+K.show+'" class="choose">');a.push('<div class="title"><div id="'+K.x+'" class="close" style="float:right;">×</div><div>&nbsp;<span id="'+K.title+'"></span>&nbsp;</div></div>');a.push('<div id="'+K.data+'"></div>');a.push('</div>');a.push('</div>');a.push('<div class="dhmsbtn div">');a.push('<div class="dhms">');a.push('<label'+(E.$c.level>3 ? ' style="display:none;"':'')+'>'+L.t[0]+'</label>');a.push('<label'+(E.$c.level>3 ? ' style="display:none;"':'')+'><div id="'+K.H+'" class="btn"></div>'+L.t[3]+'</label>');a.push('<label'+(E.$c.level>2 ? ' style="display:none;"':'')+'><div id="'+K.m+'" class="btn"></div>'+L.t[2]+'</label>');a.push('<label'+(E.$c.level>1 ? ' style="display:none;"':'')+'><div id="'+K.s+'" class="btn"></div>'+L.t[1]+'</label>');a.push('</div>');a.push('<div class="dbtn">');a.push('<div id="'+K.clear+'" class="btn">'+L.b[1]+'</div>');a.push('<div id="'+K.ok+'" class="btn">'+L.b[0]+'</div>');a.push('<div id="'+K.close+'" class="btn">'+L.b[2]+'</div>');a.push('</div>');a.push('</div>');a.push('</div>');E.$panel.innerHTML=a.join("");E.$(K.prevY).onclick=function(){E.goPrevYear(E);E.$bindData();};E.$(K.nextY).onclick=function(){E.goNextYear(E);E.$bindData();};E.$(K.prevM).onclick=function(){E.goPrevMonth(E);E.$bindData();};E.$(K.nextM).onclick=function(){E.goNextMonth(E);E.$bindData();};E.$(K.y).onclick=function(){E.$drawChoose(6,E.$s.y);};E.$(K.M).onclick=function(){E.$drawChoose(5);};E.$(K.H).onclick=function(){E.$drawChoose(3);};E.$(K.m).onclick=function(){E.$drawChoose(2);};E.$(K.s).onclick=function(){E.$drawChoose(1);};E.$(K.x).onclick=function(){E.$(E.$k.show).style.display="none";};E.$(K.clear).onclick=function(){E.$return("");};E.$(K.close).onclick=function(){E.$hide();};E.$(K.ok).onclick=function(){E.$return(E.$format(new Date(E.$s.y,E.$s.M,E.$s.d,E.$s.H,E.$s.m,E.$s.s),E.$c.format));};},$drawChoose:function(t,year){var E=this;var S=E.$s,o=E.$(E.$k.data),L=$jskey.$CalendarLang[E.$c.lang],a=[];a.push('<table>');if(t<4&&t>0){var m=10;if(t==3){m=4}for(var i=0;i<6;i++){a.push('<tr>');for(var j=0;j<m;j++){a.push('<td cv="'+(i*m+j)+'">'+E.$fnNum(i*m+j)+'</td>');}a.push('</tr>');}}else if(t==5){var m=2;for(var i=0;i<6;i++){a.push('<tr>');for(var j=0;j<m;j++){a.push('<td cv="'+(i*m+j)+'">'+L.M[(i*m+j)]+'</td>');}a.push('</tr>');}}else{var m=4,y=E.$int(E.$fnYear(year).substr(0,3))*10;y=y%20==10 ? y-10:y;for(var i=0;i<5;i++){a.push('<tr>');for(var j=0;j<m;j++){a.push('<td cv="'+(y+i*m+j)+'">'+E.$fnYear(y+i*m+j)+'</td>');}a.push('</tr>');}a.push('<tr>');a.push('<td colspan="2" class="day" cv="'+(y-20)+'" id="'+E.$k.prevP+'"><div class="jsarr"><div class="up"></div></div></td>');a.push('<td colspan="2" class="day" cv="'+(y+20)+'" id="'+E.$k.nextP+'"><div class="jsarr"><div class="down"></div></div></td>');a.push('<tr>');}a.push('</table>');E.$(E.$k.title).innerHTML=L.f[t];o.innerHTML=a.join("");var tds=E.$(E.$k.data).getElementsByTagName("td");for(var i=0;i<tds.length;i++){var z=tds[i];var v=E.$int(z.getAttribute("cv")),q=-1;if(t==6){var _id=z.getAttribute("id")||"";if(_id==E.$k.prevP||_id==E.$k.nextP){var _j=E.$int(z.getAttribute("cv"));if((_id==E.$k.prevP&&(_j>=E.$c.min.y||E.$c.min.y<=(_j+19)))||(_id==E.$k.nextP&&_j<=E.$c.max.y)){z.onclick=function(){E.$drawChoose(6,this.getAttribute("cv"));};E.$onMouse(z);}}else{q=E.$s.y;if(E.$checkDate(6,{y:v})){z.className="day";z.onclick=function(){E.$s.y=this.getAttribute("cv");E.$bindData();};E.$onMouse(z);}}}else if(t==5){q=E.$s.M;if(E.$checkDate(5,{y:S.y,M:v})){z.className="day";z.onclick=function(){E.$s.M=this.getAttribute("cv");E.$bindData();};E.$onMouse(z);}}else if(t==3){q=E.$s.H;if(E.$checkDate(3,{y:S.y,M:S.M,d:S.d,H:v})){z.className="day";z.onclick=function(){E.$s.H=this.innerHTML;E.$bindData();};E.$onMouse(z);}}else if(t==2){q=E.$s.m;if(E.$checkDate(2,{y:S.y,M:S.M,d:S.d,H:S.H,m:v})){z.className="day";z.onclick=function(){E.$s.m=this.innerHTML;E.$bindData();};E.$onMouse(z);}}else if(t==1){q=E.$s.s;if(E.$checkDate(1,{y:S.y,M:S.M,d:S.d,H:S.H,m:S.m,s:v})){z.className="day";z.onclick=function(){E.$s.s=this.innerHTML;E.$bindData();};E.$onMouse(z);}}if(v==q){z.className="sel";z.isMe=true;}}E.$(E.$k.show).style.display="";},$fnNum:function(v){return v<10 ? '0'+(v|0):v;},$fnYear:function(v){v="000"+v;return v.substring(v.length-4,v.length);},$format:function(d,f){var t={"y+":d.getFullYear(),"M+":d.getMonth()+1,"d+":d.getDate(),"H+":d.getHours(),"m+":d.getMinutes(),"s+":d.getSeconds(),"S+":d.getMilliseconds(),"W+":this.$getWeek(d),"w+":$jskey.$CalendarLang[this.$c.lang].w[d.getDay()]};var _t;for(var k in t){while(new RegExp("("+k+")").test(f)){_t=(RegExp.$1.length==1)? t[k]:("0000000000".substring(0,RegExp.$1.length)+t[k]).substr((""+t[k]).length);f=f.replace(RegExp.$1,_t+"");}}return f;},$getLevel:function(s){if(s.indexOf('ss')>-1){return 1;}if(s.indexOf('mm')>-1){return 2;}if(s.indexOf('HH')>-1){return 3;}if(s.indexOf('dd')>-1){return 4;}if(s.indexOf('MM')>-1){return 5;}if(s.indexOf('yyyy')>-1){return 6;}return 6;},$getPoint:function(e){var x=e.offsetLeft,y=e.offsetTop;while(e=e.offsetParent){x+=e.offsetLeft;y+=e.offsetTop;}var a={"sx":x,"sy":y-document.documentElement.scrollTop,"x":x,"y":y,"w":this.$(this.$k.panel).offsetWidth,"h":this.$(this.$k.panel).offsetHeight};return a;},$getViewArray:function(y,m){var a=[];var f=new Date(y,m,1).getDay();var L=new Date(y,m+1,0).getDate();var afL=new Date(y,m,0).getDate();for(var i=f;i>0;i--){a[i-1]=f-i-afL;}for(var i=f+L,j=1;i<42;i++,j++){a[i]=-j;}for(var i=0;i<L;i++){a[i+f]=i+1;}if(this.$s.d>L){this.$s.d=L;}return a;},$getWeek:function(d){var x=new Date(d.getFullYear(),0,1);var y=this.$int(Math.abs(d-x)/ 86400000)+1;var w=(y+x.getDay())/ 7;var i=this.$int(w);return((w>i)?(i+1):i);},goPrevYear:function(E){if(E.$s.y<=E.$c.min.y){return;}E.$s.y--;},goNextYear:function(E){if(E.$s.y>=E.$c.max.y){return;}E.$s.y++;},goPrevMonth:function(E){var S=E.$s,I=E.$c.min;if(S.y<=I.y&&S.M<=I.M){return;}S.M--;if(S.M==-1){S.y--;S.M=11;}},goNextMonth:function(E){var S=E.$s,A=E.$c.max;if(S.y>=A.y&&S.M>=A.M){return;}S.M++;if(S.M==12){S.y++;S.M=0;}},$hide:function(){this.$panel.style.display="none";this.$div.style.display="none";this.$focus=false;},$init:function(){var E=this;var v=E.$k.div;if(E.$(v)==null){var s='<div id="'+E.$k.panel+'" style="position:absolute;display:none;z-index:9999;" class="jskey_cal"></div>';if(document.all){s+='<iframe style="position:absolute;z-index:8888;width:expression(this.previousSibling.offsetWidth);';s+='height:expression(this.previousSibling.offsetHeight);';s+='left:expression(this.previousSibling.offsetLeft);top:expression(this.previousSibling.offsetTop);';s+='display:expression(this.previousSibling.style.display);" scrolling="no" frameborder="no"></iframe>';}var o=document.createElement("div");o.innerHTML=s;o.id=v;o.style.display="none";document.body.appendChild(o);E.$panel=E.$(E.$k.panel);E.$div=E.$(v);}},$int:function(v){return parseInt(v,10);},$myDate:function(f){var E=this,y=1,M=0,d=1,H=0,m=0,s=0;switch(f.length){case 19:s=E.$int(f.substring(17,19));case 16:m=E.$int(f.substring(14,16));case 13:H=E.$int(f.substring(11,13));case 10:d=E.$int(f.substring(8,10));case 7:M=E.$int(f.substring(5,7))-1;case 4:y=E.$int(f.substring(0,4));}var v=new Date(y,M,d,H,m,s);var o={y:v.getFullYear(),M:v.getMonth(),d:v.getDate(),H:v.getHours(),m:v.getMinutes(),s:v.getSeconds()};return o;},$onMouse:function(z){var E=this;z.onmouseover=function(){this.className="over";};z.onmouseout=function(){var t="day";if(E.$sel==this){t="sel";}else{if(this.isToday){t="today";}else if(this.isMe){t="sel";}else if(this.getAttribute("otd")=="x"){t=this.getAttribute("tn")!="tdDay" ? "hholiday":"hday";}else if(this.getAttribute("tn")=="tdHoliday"){t="holiday";}}this.className=t;};},$recovery:function(){var E=this;var S=E.$s,K=E.$k,I=E.$c.min,A=E.$c.max;if(S.y==I.y&&S.M<=I.M){S.M=I.M;if(S.d<=I.d){S.d=I.d;if(S.H<=I.H){S.H=I.H;if(S.m<=I.m){S.m=I.m;if(S.s<=I.s){S.s=I.s;}}}}}else if(S.y==A.y&&S.M>=A.M){S.M=A.M;if(S.d>=A.d){S.d=A.d;if(S.H>=A.H){S.H=A.H;if(S.m>=A.m){S.m=A.m;if(S.s>=A.s){S.s=A.s;}}}}}E.$(K.y).innerHTML=E.$fnYear(S.y);if(E.$c.level>=6){return;}E.$(K.M).innerHTML=$jskey.$CalendarLang[E.$c.lang].M[S.M];E.$(K.H).innerHTML=E.$fnNum(S.H);E.$(K.m).innerHTML=E.$fnNum(S.m);E.$(K.s).innerHTML=E.$fnNum(S.s);},$reset:function(d){var E=this;var S=E.$s;S.y=d.getFullYear();S.M=d.getMonth();S.d=d.getDate();S.H=E.$fnNum(d.getHours());S.m=E.$fnNum(d.getMinutes());S.s=E.$fnNum(d.getSeconds());},$return:function(dt){var E=this;var o=E.$input;if(o !=null){o.value=dt;}E.$hide();if(o.onchange==null){if(typeof(o.changeEvent)=='function'){o.changeEvent();}return;}var ev=o.onchange.toString();ev=ev.substring(((ev.indexOf("ValidatorOnChange();")>0)? ev.indexOf("ValidatorOnChange();")+20:ev.indexOf("{")+1),ev.lastIndexOf("}"));o.changeEvent=new Function(ev);o.changeEvent();},$isChange:function(p){var C=this.$c;C.left=p.left;C.top=p.top;C.min=this.$myDate(p.min);C.max=this.$myDate(p.max);if(C.lang !=p.lang||C.level !=p.level||C.format !=p.format){C.lang=p.lang;C.format=p.format;C.level=p.level;return true;}return false;},showCalendar:function(o,p){var E=this;var t;E.$init();if(o==null){throw new Error("error");}if(p.min==null){p.min=E.$p.min;}if(p.max==null){p.max=E.$p.max;}if(p.lang==null){p.lang="zh-CN";}if($jskey.$CalendarLang[p.lang]==null){p.lang="zh-CN";}if(p.left==null){p.left=0;}if(p.top==null){p.top=0;}if(p.format==null){p.format="yyyy-MM-dd";}p.level=E.$getLevel(p.sample||p.show||"yyyy-MM-dd");t=new Date();try{var f=p.format,v=o.value;if(v.length>=f.length){var y=0,M=1,d=1,H=0,m=0,s=0,_y=f.indexOf('yyyy'),_M=f.indexOf('MM'),_d=f.indexOf('dd'),_H=f.indexOf('HH'),_m=f.indexOf('mm'),_s=f.indexOf('ss');if(_y !=-1){y=E.$int(v.substring(_y,_y+4));};if(!isNaN(y)&&y>0){if(_M !=-1){M=v.substring(_M,_M+2);if(isNaN(M)){M=(t.getMonth()+1);}}if(_d !=-1){d=E.$int(v.substring(_d,_d+2));if(isNaN(d)){d=t.getDate();}}if(_H !=-1){H=E.$int(v.substring(_H,_H+2));if(isNaN(H)){H=t.getHours();}}if(_m !=-1){m=E.$int(v.substring(_m,_m+2));if(isNaN(m)){m=t.getMinutes();}}if(_s !=-1){s=E.$int(v.substring(_s,_s+2));if(isNaN(s)){s=t.getSeconds();}}eval("t=new Date("+y+","+(E.$int(M)-1)+","+E.$int(d)+","+E.$int(H)+","+E.$int(m)+","+E.$int(s)+")");}}}catch(e){t=new Date();}E.$reset(t);E.$skin(p.skin||"default");E.$input=o;var x=E.$isChange(p);if(E.$panel.innerHTML==""||x){E.$draw();}E.$bindData();E.$panel.style.display="";E.$div.style.display="";E.$(E.$k.show).style.display="none";t=E.$getPoint(o);E.$panel.style.left=(t.x+E.$c.left)+"px";E.$panel.style.top=((E.$c.top==0)?((t.sy>340)?(t.y-t.h):(t.y+o.offsetHeight)):(t.y+o.offsetHeight+E.$c.top))+"px";if(!o.isTransEvent){o.isTransEvent=true;if(o.onblur !=null){o.blurEvent=o.onblur;}o.onblur=function(){E.$blur();if(typeof(this.blurEvent)=='function'){this.blurEvent();}};}E.$div.onmouseover=function(){E.$focus=true;};E.$div.onmouseout=function(){E.$focus=false;};},show:function(p,old){if($jskey.$isDOM(p)){this.showCalendar(p,old);return true;}if(typeof(old)=='object'){p=old;}if(p.target){this.showCalendar($jskey.$isDOM(p.target)? p.target:this.$(p.target+""),p);return true;}return false;}};
$jskey.$CalendarLang["zh-CN"]={"M":["01月","02月","03月","04月","05月","06月","07月","08月","09月","10月","11月","12月"],"w":["日","一","二","三","四","五","六"],"t":["","秒","分","时"],"f":["","秒钟","分钟","时钟","","月份","年份"],"b":["确定","清空","关闭"]};
$jskey.$CalendarLang["zh-TW"]={"M":["01月","02月","03月","04月","05月","06月","07月","08月","09月","10月","11月","12月"],"w":["日","一","二","三","四","五","六"],"t":["","秒","分","時"],"f":["","秒鐘","分鐘","時鐘","","月份","年份"],"b":["確定","清空","關閉"]};
$jskey.$CalendarLang["en-US"]={"M":["January","February","March","April","May","June","July","August","September","October","November","December"],"w":["Su","Mo","Tu","We","Th","Fr","Sa"],"t":["Time","",":",":"],"f":["","second","minute","hour","","month","year"],"b":["Done","Cls","Close"]};
$jskey.calendar=new $jskey.Calendar();$jskey.calendar.$skin("default");
}();
